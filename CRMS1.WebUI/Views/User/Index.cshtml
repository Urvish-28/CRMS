@model IEnumerable<CRMS1.Core.ViewModels.IndexViewModel>

@{
    ViewBag.Title = "Index";
}
<script src="https://code.jquery.com/jquery-3.6.4.js" integrity="sha256-a9jBBRygX1Bh5lt8GZjXDzyOB+bWve9EiO7tROUtj/E=" crossorigin="anonymous"></script>
<script>
    $(document).ready(function () {
        $('#success').fadeOut(3000);
        $('#grid').data('KendoGrid').datasource.read();
        $('#grid').data('KendoGrid').refresh();
    })
</script>

<br />
<h2>Employee</h2>

<p>
    @Html.ActionLink("Create New", "Create", "User", new { @class = "btn btn-primary" })
</p>
@if (@TempData["AlertMsg"] != null)
{
    <div id="success" class="alert alert-success">
        <strong>Success !</strong> @TempData["AlertMsg"]
    </div>
}

@(
    Html.Kendo().Grid(Model).Name("grid")
    .Columns(columns =>
    {
        columns.Bound(expression: c => c.UserName);
        columns.Bound(expression: c => c.Name);
        columns.Bound(expression: c => c.Email);
        columns.Bound(expression: c => c.MobileNo);
        columns.Bound(expression: c => c.Gender);
        columns.Bound(expression: c => c.Role);
        columns.Bound(c => c.Id).HeaderHtmlAttributes(new { @class = "center_text" }).ClientTemplate("<div class='k_action_table'>" + ("<a title='Edit' href='" + Url.Action("Edit", "User") + "/#=Id#' " + "> Edit </a>") + " ||" +
                      "<a href='" + Url.Action("Delete", "User") + "/#=Id#' onclick='return confirm(\"Are you sure you want to delete this item?\")'>  Delete </a>").Width(200).Title("Action"); ;
    }).HtmlAttributes(new { Style = ""})
    .Sortable()
    .Scrollable(h=>h.Height("auto"))
    .Filterable()
    .Pageable(p=>p.Refresh(true).PageSizes(true))
    .DataSource(datasource => datasource.Ajax().Read(read => read.Action("UserGrid", "User"))
        .PageSize(5).Model(model => model.Id(expression:p => p.Id)))
    )
